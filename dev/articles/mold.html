<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Molding data for modeling • hardhat</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Molding data for modeling">
<meta name="robots" content="noindex">
<script defer data-domain="hardhat.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hardhat</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.4.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/forge.html">Forging data for predictions</a></li>
    <li><a class="dropdown-item" href="../articles/mold.html">Molding data for modeling</a></li>
    <li><a class="dropdown-item" href="../articles/package.html">Creating Modeling Packages With hardhat</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/12/hardhat-0-1-0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/hardhat/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Molding data for modeling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/hardhat/blob/main/vignettes/mold.Rmd" class="external-link"><code>vignettes/mold.Rmd</code></a></small>
      <div class="d-none name"><code>mold.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/hardhat" class="external-link">hardhat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://modeldata.tidymodels.org" class="external-link">modeldata</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'modeldata'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:datasets':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     penguins</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span>
<span><span class="va">penguins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>For most modeling functions, data must be accepted from the user in
some format where the <em>outcomes</em> and <em>predictors</em> are both
specified. The next step is often to validate and preprocess that input
in some way to prepare it for the actual modeling implementation
function. For example, when a formula method is used, R provides some
infrastructure for preprocessing the user input through the
<code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">model.frame()</a></code> and <code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix()</a></code>
functions.</p>
<p>But the formula method is not the only way to specify modeling terms.
There is also an XY method, where <code>x</code> and <code>y</code> are
supplied directly, and, recently, a <code>recipe</code> implementation
can be used to preprocess data using a set of sequential steps.</p>
<p>As a developer, you likely won’t want to care about the details of
how each of these methods work, but (hopefully) still want to provide
all three of these interfaces for your shiny new model.
<code><a href="../reference/mold.html">mold()</a></code> makes this easy on you, and takes care of the
details of preprocessing user input from any of these methods.</p>
<p>The intended use of <code><a href="../reference/mold.html">mold()</a></code> is to be called from your
user facing modeling function. To see that in action, have a look at the
vignette found here: <code><a href="../articles/package.html">vignette("package", "hardhat")</a></code>. The
rest of this vignette will be focused on the various different ways to
use <code><a href="../reference/mold.html">mold()</a></code>, but keep in mind that generally it is not used
as an interactive function like this.</p>
</div>
<div class="section level2">
<h2 id="a-first-example">A First Example<a class="anchor" aria-label="anchor" href="#a-first-example"></a>
</h2>
<p>The most familiar interface for R users is likely the formula
interface. In this case, terms are specified using the formula notation:
<code>outcomes ~ predictors</code>. Generally, as a developer, you have
to then call <code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">model.frame()</a></code> and <code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix()</a></code>
on this result to coerce it into the right format for ingestion into
your model. <code><a href="../reference/mold.html">mold()</a></code> handles all of that for you.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="va">body_mass_g</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">bill_length_mm</span><span class="op">)</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">penguin_form</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "predictors" "outcomes"   "blueprint"  "extras"</span></span></code></pre></div>
<p><code><a href="../reference/mold.html">mold()</a></code> returns four things. Two of them are immediately
useful, and are almost always applicable to the modeling implementation
you have created. The first is the <code>predictors</code>, returned as
a tibble. All of the required processing has been done for you, so you
just have to focus on the modeling implementation.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_form</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 1</span></span></span>
<span><span class="co">#&gt;    `log(bill_length_mm)`</span></span>
<span><span class="co">#&gt;                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                  3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                  3.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                  3.70</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                  3.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                  3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                  3.66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                  3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                  3.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                  3.65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                  3.54</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<p>Second is the <code>outcomes</code>, also returned as a tibble. While
not used here, any processing on the outcome that was specified in the
formula would also be done here.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguin_form</span><span class="op">$</span><span class="va">outcomes</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 1</span></span></span>
<span><span class="co">#&gt;    body_mass_g</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        <span style="text-decoration: underline;">4</span>675</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        <span style="text-decoration: underline;">3</span>200</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        <span style="text-decoration: underline;">4</span>400</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<p>Beyond these two elements, <code><a href="../reference/mold.html">mold()</a></code> also returns a slot
for any <code>extras</code> that might have been generated during
preprocessing, but aren’t specifically predictors or outcomes. For
example, an <code><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset()</a></code> can be specified directly in the
formula, but isn’t technically a predictor.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="va">body_mass_g</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">bill_length_mm</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="va">bill_depth_mm</span><span class="op">)</span>, <span class="va">penguins</span><span class="op">)</span><span class="op">$</span><span class="va">extras</span></span>
<span><span class="co">#&gt; $offset</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 1</span></span></span>
<span><span class="co">#&gt;    .offset</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    18.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    17.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    18  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    19.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    20.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    17.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    19.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    17.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    21.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    21.1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<p>Lastly, <code><a href="../reference/mold.html">mold()</a></code> returns a very important object, the
<code>blueprint</code>. This is responsible for knowing how to
preprocess both the training data, and any new data at prediction time.
As a developer, you should attach the <code>blueprint</code> to your
model object before returning it to the user. For more information about
this, see the package development vignette,
<code><a href="../articles/package.html">vignette("package", "hardhat")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="blueprints">blueprints<a class="anchor" aria-label="anchor" href="#blueprints"></a>
</h2>
<p>As mentioned above, one of the objects that <code><a href="../reference/mold.html">mold()</a></code>
returns is an <code>blueprint</code> responsible for controlling the
preprocessing. There are multiple blueprints available in
<code>hardhat</code>, but when you call <code><a href="../reference/mold.html">mold()</a></code> one is
selected automatically for you. The following two calls generate the
same result, using the default formula blueprint.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="op">~</span> <span class="va">body_mass_g</span>, <span class="va">penguins</span><span class="op">)</span>, </span>
<span>  <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="op">~</span> <span class="va">body_mass_g</span>, <span class="va">penguins</span>, blueprint <span class="op">=</span> <span class="fu"><a href="../reference/default_formula_blueprint.html">default_formula_blueprint</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Each blueprint can be tweaked to change how the processing for that
interface occurs, and the options vary per blueprint. To understand why
you’d ever want to do this, read on!</p>
</div>
<div class="section level2">
<h2 id="formulas">Formulas<a class="anchor" aria-label="anchor" href="#formulas"></a>
</h2>
<p>Now that you have a basic idea of how <code><a href="../reference/mold.html">mold()</a></code> works, we
can talk about some of the more interesting functionality.</p>
<div class="section level3">
<h3 id="intercepts">Intercepts<a class="anchor" aria-label="anchor" href="#intercepts"></a>
</h3>
<p>One challenge with the standard formula interface is that, by
default, intercepts are always implicitly present and are added to your
data set automatically. This works great for the simple regression case.
However, other models might either always require or never allow an
intercept, but still use the formula interface because of its
convenience (for example, <code>earth</code>). This has led to many ad
hoc solutions that prevent the user from removing or adding an
intercept.</p>
<p>To get around this, <code><a href="../reference/mold.html">mold()</a></code> will never add an intercept
by default. Instead, the addition of an intercept is completely
controlled by the formula blueprint argument,
<code>intercept</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">no_intercept</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="op">~</span> <span class="va">body_mass_g</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span></span>
<span><span class="va">no_intercept</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 1</span></span></span>
<span><span class="co">#&gt;    body_mass_g</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        <span style="text-decoration: underline;">4</span>675</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        <span style="text-decoration: underline;">3</span>200</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        <span style="text-decoration: underline;">4</span>400</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">with_intercept</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span> <span class="va">body_mass_g</span>, <span class="va">penguins</span>, </span>
<span>  blueprint <span class="op">=</span> <span class="fu"><a href="../reference/default_formula_blueprint.html">default_formula_blueprint</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">with_intercept</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 2</span></span></span>
<span><span class="co">#&gt;    `(Intercept)` body_mass_g</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>             1        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>             1        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>             1        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>             1        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>             1        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>             1        <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>             1        <span style="text-decoration: underline;">4</span>675</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>             1        <span style="text-decoration: underline;">3</span>200</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>             1        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>             1        <span style="text-decoration: underline;">4</span>400</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<p>An error is thrown if an intercept removal term is specified:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="op">~</span> <span class="va">body_mass_g</span> <span class="op">-</span> <span class="fl">1</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `mold()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `formula` must not contain the intercept removal term: `- 1`.</span></span>
<span></span>
<span><span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="op">~</span> <span class="va">body_mass_g</span> <span class="op">+</span> <span class="fl">0</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `mold()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> `formula` must not contain the intercept removal term: `+ 0`</span></span>
<span><span class="co">#&gt;   or `0 +`.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dummy-variables">Dummy variables<a class="anchor" aria-label="anchor" href="#dummy-variables"></a>
</h3>
<p>One of the nice things about the formula interface is that it expands
factors into dummy variable columns for you. Like intercepts, this is
great…until it isn’t. For example, <code>ranger</code> fits a random
forest, which can take factors directly, but still uses the formula
notation. In this case, it would be great if the factor columns
specified as predictors <em>weren’t</em> expanded. This is the job of
the blueprint argument, <code>indicators</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_dummies</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="op">~</span> <span class="va">body_mass_g</span> <span class="op">+</span> <span class="va">species</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span></span>
<span><span class="va">expanded_dummies</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 4</span></span></span>
<span><span class="co">#&gt;    body_mass_g speciesAdelie speciesChinstrap speciesGentoo</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        <span style="text-decoration: underline;">3</span>750             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        <span style="text-decoration: underline;">3</span>800             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        <span style="text-decoration: underline;">3</span>250             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        <span style="text-decoration: underline;">3</span>450             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        <span style="text-decoration: underline;">3</span>650             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        <span style="text-decoration: underline;">3</span>625             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        <span style="text-decoration: underline;">4</span>675             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        <span style="text-decoration: underline;">3</span>200             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        <span style="text-decoration: underline;">3</span>800             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        <span style="text-decoration: underline;">4</span>400             1                0             0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">non_expanded_dummies</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span> <span class="va">body_mass_g</span> <span class="op">+</span> <span class="va">species</span>, <span class="va">penguins</span>, </span>
<span>  blueprint <span class="op">=</span> <span class="fu"><a href="../reference/default_formula_blueprint.html">default_formula_blueprint</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">non_expanded_dummies</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 2</span></span></span>
<span><span class="co">#&gt;    body_mass_g species</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        <span style="text-decoration: underline;">3</span>750 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        <span style="text-decoration: underline;">3</span>800 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        <span style="text-decoration: underline;">3</span>250 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        <span style="text-decoration: underline;">3</span>450 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        <span style="text-decoration: underline;">3</span>650 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        <span style="text-decoration: underline;">3</span>625 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        <span style="text-decoration: underline;">4</span>675 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        <span style="text-decoration: underline;">3</span>200 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        <span style="text-decoration: underline;">3</span>800 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        <span style="text-decoration: underline;">4</span>400 Adelie </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<p><em>Note:</em> It’s worth mentioning that when an intercept is not
present, base R expands the first factor completely into <code>K</code>
indicator columns corresponding to the <code>K</code> levels present in
that factor (also known as one-hot encoding). Subsequent columns are
expanded into the more traditional <code>K - 1</code> columns. When an
intercept is present, <code>K - 1</code> columns are generated for all
factor predictors.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">k_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="op">~</span> <span class="va">species</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span></span>
<span><span class="va">k_minus_one_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span> <span class="va">species</span>, <span class="va">penguins</span>, </span>
<span>  blueprint <span class="op">=</span> <span class="fu"><a href="../reference/default_formula_blueprint.html">default_formula_blueprint</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">k_cols</span><span class="op">$</span><span class="va">predictors</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "speciesAdelie"    "speciesChinstrap" "speciesGentoo"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">k_minus_one_cols</span><span class="op">$</span><span class="va">predictors</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "(Intercept)"      "speciesChinstrap" "speciesGentoo"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multivariate-outcomes">Multivariate outcomes<a class="anchor" aria-label="anchor" href="#multivariate-outcomes"></a>
</h3>
<p>One of the other frustrating things about working with the formula
method is that multivariate outcomes are a bit clunky to specify.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">body_mass_g</span>, <span class="va">bill_length_mm</span><span class="op">)</span> <span class="op">~</span> <span class="va">bill_depth_mm</span></span>
<span></span>
<span><span class="va">frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">model.frame</a></span><span class="op">(</span><span class="va">.f</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">frame</span><span class="op">)</span></span>
<span><span class="co">#&gt;   cbind(body_mass_g, bill_length_mm).body_mass_g</span></span>
<span><span class="co">#&gt; 1                                         3750.0</span></span>
<span><span class="co">#&gt; 2                                         3800.0</span></span>
<span><span class="co">#&gt; 3                                         3250.0</span></span>
<span><span class="co">#&gt; 4                                         3450.0</span></span>
<span><span class="co">#&gt; 5                                         3650.0</span></span>
<span><span class="co">#&gt; 6                                         3625.0</span></span>
<span><span class="co">#&gt;   cbind(body_mass_g, bill_length_mm).bill_length_mm bill_depth_mm</span></span>
<span><span class="co">#&gt; 1                                              39.1          18.7</span></span>
<span><span class="co">#&gt; 2                                              39.5          17.4</span></span>
<span><span class="co">#&gt; 3                                              40.3          18.0</span></span>
<span><span class="co">#&gt; 4                                              36.7          19.3</span></span>
<span><span class="co">#&gt; 5                                              39.3          20.6</span></span>
<span><span class="co">#&gt; 6                                              38.9          17.8</span></span></code></pre></div>
<p>This might look like 3 columns, but it is actually 2, where the first
column is named <code>cbind(body_mass_g, bill_length_mm)</code>, and it
is actually a matrix with 2 columns, <code>body_mass_g</code> and
<code>bill_length_mm</code> inside it.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">frame</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">frame</span><span class="op">$</span><span class="va">`cbind(body_mass_g, bill_length_mm)`</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "matrix" "array"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">frame</span><span class="op">$</span><span class="va">`cbind(body_mass_g, bill_length_mm)`</span><span class="op">)</span></span>
<span><span class="co">#&gt;      body_mass_g bill_length_mm</span></span>
<span><span class="co">#&gt; [1,]        3750           39.1</span></span>
<span><span class="co">#&gt; [2,]        3800           39.5</span></span>
<span><span class="co">#&gt; [3,]        3250           40.3</span></span>
<span><span class="co">#&gt; [4,]        3450           36.7</span></span>
<span><span class="co">#&gt; [5,]        3650           39.3</span></span>
<span><span class="co">#&gt; [6,]        3625           38.9</span></span></code></pre></div>
<p>The default formula blueprint used with <code><a href="../reference/mold.html">mold()</a></code> allows
you to specify multiple outcomes like you specify multiple predictors.
You can even do inline transformations of each outcome, although if you
are doing very much of that, I’d advise using a recipe instead.
<code>outcomes</code> then holds the two outcomes columns.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multivariate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="va">body_mass_g</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">bill_length_mm</span><span class="op">)</span> <span class="op">~</span> <span class="va">bill_depth_mm</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span></span>
<span><span class="va">multivariate</span><span class="op">$</span><span class="va">outcomes</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 2</span></span></span>
<span><span class="co">#&gt;    body_mass_g `log(bill_length_mm)`</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        <span style="text-decoration: underline;">3</span>750                  3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        <span style="text-decoration: underline;">3</span>800                  3.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        <span style="text-decoration: underline;">3</span>250                  3.70</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        <span style="text-decoration: underline;">3</span>450                  3.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        <span style="text-decoration: underline;">3</span>650                  3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        <span style="text-decoration: underline;">3</span>625                  3.66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        <span style="text-decoration: underline;">4</span>675                  3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        <span style="text-decoration: underline;">3</span>200                  3.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        <span style="text-decoration: underline;">3</span>800                  3.65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        <span style="text-decoration: underline;">4</span>400                  3.54</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="xy">XY<a class="anchor" aria-label="anchor" href="#xy"></a>
</h2>
<p>The second interface is the XY interface, useful when the predictors
and outcomes are specified separately.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">penguins</span>, select <span class="op">=</span> <span class="op">-</span><span class="va">body_mass_g</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">penguins</span>, select <span class="op">=</span>  <span class="va">body_mass_g</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguin_xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguin_xy</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 6</span></span></span>
<span><span class="co">#&gt;    species island  bill_length_mm bill_depth_mm flipper_length_mm sex  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Adelie  Torger…           39.1          18.7               181 male </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Adelie  Torger…           39.5          17.4               186 fema…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Adelie  Torger…           40.3          18                 195 fema…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Adelie  Torger…           36.7          19.3               193 fema…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Adelie  Torger…           39.3          20.6               190 male </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Adelie  Torger…           38.9          17.8               181 fema…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Adelie  Torger…           39.2          19.6               195 male </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Adelie  Torger…           41.1          17.6               182 fema…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Adelie  Torger…           38.6          21.2               191 male </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Adelie  Torger…           34.6          21.1               198 male </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span>
<span></span>
<span><span class="va">penguin_xy</span><span class="op">$</span><span class="va">outcomes</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 1</span></span></span>
<span><span class="co">#&gt;    body_mass_g</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        <span style="text-decoration: underline;">4</span>675</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        <span style="text-decoration: underline;">3</span>200</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        <span style="text-decoration: underline;">4</span>400</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<p>This interface doesn’t do too much in the way of preprocessing, but
it does let you specify an <code>intercept</code> in the blueprint
specific arguments. Rather than
<code><a href="../reference/default_formula_blueprint.html">default_formula_blueprint()</a></code>, this uses the
<code><a href="../reference/default_xy_blueprint.html">default_xy_blueprint()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xy_with_intercept</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, blueprint <span class="op">=</span> <span class="fu"><a href="../reference/default_xy_blueprint.html">default_xy_blueprint</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">xy_with_intercept</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 7</span></span></span>
<span><span class="co">#&gt;    `(Intercept)` species island    bill_length_mm bill_depth_mm</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>             1 Adelie  Torgersen           39.1          18.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>             1 Adelie  Torgersen           39.5          17.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>             1 Adelie  Torgersen           40.3          18  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>             1 Adelie  Torgersen           36.7          19.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>             1 Adelie  Torgersen           39.3          20.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>             1 Adelie  Torgersen           38.9          17.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>             1 Adelie  Torgersen           39.2          19.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>             1 Adelie  Torgersen           41.1          17.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>             1 Adelie  Torgersen           38.6          21.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>             1 Adelie  Torgersen           34.6          21.1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: flipper_length_mm &lt;int&gt;, sex &lt;fct&gt;</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="vector-outcomes">Vector outcomes<a class="anchor" aria-label="anchor" href="#vector-outcomes"></a>
</h3>
<p><code>y</code> is a bit special in the XY interface, because in the
univariate case users might expect to be able to pass a vector, a 1
column data frame, or a matrix. <code><a href="../reference/mold.html">mold()</a></code> is prepared for all
of those cases, but the vector case requires special attention. To be
consistent with all of the other <code><a href="../reference/mold.html">mold()</a></code> interfaces, the
<code>outcomes</code> slot of the return value should be a tibble. To
achieve this when <code>y</code> is supplied as a vector, a default
column name is created, <code>".outcome"</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">$</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">$</span><span class="va">outcomes</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 1</span></span></span>
<span><span class="co">#&gt;    .outcome</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     <span style="text-decoration: underline;">4</span>675</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     <span style="text-decoration: underline;">3</span>200</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     <span style="text-decoration: underline;">4</span>400</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="recipe">Recipe<a class="anchor" aria-label="anchor" href="#recipe"></a>
</h2>
<p>The last of the three interfaces is the relatively new recipes
interface. The <code><a href="../reference/default_recipe_blueprint.html">default_recipe_blueprint()</a></code> knows how to
<code><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep()</a></code> your recipe, and <code><a href="https://recipes.tidymodels.org/reference/juice.html" class="external-link">juice()</a></code> it to extract
the predictors and the outcomes. This is by far the most flexible way to
preprocess your data.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">bill_length_mm</span> <span class="op">~</span> <span class="va">species</span> <span class="op">+</span> <span class="va">bill_depth_mm</span>, <span class="va">penguins</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_log.html" class="external-link">step_log</a></span><span class="op">(</span><span class="va">bill_length_mm</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_dummy.html" class="external-link">step_dummy</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguin_recipe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span><span class="va">rec</span>, <span class="va">penguins</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguin_recipe</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 3</span></span></span>
<span><span class="co">#&gt;    bill_depth_mm species_Chinstrap species_Gentoo</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>          18.7                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>          17.4                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>          18                   0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>          19.3                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>          20.6                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>          17.8                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>          19.6                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          17.6                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          21.2                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          21.1                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span>
<span></span>
<span><span class="va">penguin_recipe</span><span class="op">$</span><span class="va">outcomes</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 1</span></span></span>
<span><span class="co">#&gt;    bill_length_mm</span></span>
<span><span class="co">#&gt;             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>           3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>           3.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>           3.70</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>           3.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>           3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>           3.66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>           3.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>           3.72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>           3.65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>           3.54</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
<p>The only special thing you can tweak with the recipe blueprint is
whether or not an intercept is added.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">recipe_with_intercept</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mold.html">mold</a></span><span class="op">(</span></span>
<span>  <span class="va">rec</span>, <span class="va">penguins</span>, </span>
<span>  blueprint <span class="op">=</span> <span class="fu"><a href="../reference/default_recipe_blueprint.html">default_recipe_blueprint</a></span><span class="op">(</span>intercept <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">recipe_with_intercept</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 4</span></span></span>
<span><span class="co">#&gt;    `(Intercept)` bill_depth_mm species_Chinstrap species_Gentoo</span></span>
<span><span class="co">#&gt;            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>             1          18.7                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>             1          17.4                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>             1          18                   0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>             1          19.3                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>             1          20.6                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>             1          17.8                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>             1          19.6                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>             1          17.6                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>             1          21.2                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>             1          21.1                 0              0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://frick.ws" class="external-link">Hannah Frick</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
