<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="These are the base classes for creating new preprocessing blueprints. All
blueprints inherit from the one created by new_blueprint(), and the default
method specific blueprints inherit from the other three here.
If you want to create your own processing blueprint for a specific method,
generally you will subclass one of the method specific blueprints here. If
you want to create a completely new preprocessing blueprint for a totally new
preprocessing method (i.e. not the formula, xy, or recipe method) then
you should subclass new_blueprint().
In addition to creating a blueprint subclass, you will likely also need to
provide S3 methods for run_mold() and run_forge() for your subclass."><title>Create a new preprocessing blueprint — new_formula_blueprint • hardhat</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.8/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.8/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a new preprocessing blueprint — new_formula_blueprint"><meta property="og:description" content="These are the base classes for creating new preprocessing blueprints. All
blueprints inherit from the one created by new_blueprint(), and the default
method specific blueprints inherit from the other three here.
If you want to create your own processing blueprint for a specific method,
generally you will subclass one of the method specific blueprints here. If
you want to create a completely new preprocessing blueprint for a totally new
preprocessing method (i.e. not the formula, xy, or recipe method) then
you should subclass new_blueprint().
In addition to creating a blueprint subclass, you will likely also need to
provide S3 methods for run_mold() and run_forge() for your subclass."><meta property="og:image" content="https://hardhat.tidymodels.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="hardhat.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">hardhat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/forge.html">Forging data for predictions</a>
    <a class="dropdown-item" href="../articles/mold.html">Molding data for modeling</a>
    <a class="dropdown-item" href="../articles/package.html">Creating Modeling Packages With hardhat</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/12/hardhat-0-1-0/">Version 0.1.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidymodels/hardhat/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a new preprocessing blueprint</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/hardhat/blob/HEAD/R/blueprint-formula.R" class="external-link"><code>R/blueprint-formula.R</code></a>, <a href="https://github.com/tidymodels/hardhat/blob/HEAD/R/blueprint-recipe.R" class="external-link"><code>R/blueprint-recipe.R</code></a>, <a href="https://github.com/tidymodels/hardhat/blob/HEAD/R/blueprint-xy.R" class="external-link"><code>R/blueprint-xy.R</code></a>, and 1 more</small>
      <div class="d-none name"><code>new-blueprint.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These are the base classes for creating new preprocessing blueprints. All
blueprints inherit from the one created by <code>new_blueprint()</code>, and the default
method specific blueprints inherit from the other three here.</p>
<p>If you want to create your own processing blueprint for a specific method,
generally you will subclass one of the method specific blueprints here. If
you want to create a completely new preprocessing blueprint for a totally new
preprocessing method (i.e. not the formula, xy, or recipe method) then
you should subclass <code>new_blueprint()</code>.</p>
<p>In addition to creating a blueprint subclass, you will likely also need to
provide S3 methods for <code><a href="run-mold.html">run_mold()</a></code> and <code><a href="run-forge.html">run_forge()</a></code> for your subclass.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">new_formula_blueprint</span><span class="op">(</span></span>
<span>  intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  allow_novel_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ptypes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  indicators <span class="op">=</span> <span class="st">"traditional"</span>,</span>
<span>  composition <span class="op">=</span> <span class="st">"tibble"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  subclass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">new_recipe_blueprint</span><span class="op">(</span></span>
<span>  intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  allow_novel_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fresh <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  strings_as_factors <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  composition <span class="op">=</span> <span class="st">"tibble"</span>,</span>
<span>  ptypes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  recipe <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  subclass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">new_xy_blueprint</span><span class="op">(</span></span>
<span>  intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  allow_novel_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  composition <span class="op">=</span> <span class="st">"tibble"</span>,</span>
<span>  ptypes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  subclass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">new_blueprint</span><span class="op">(</span></span>
<span>  intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  allow_novel_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  composition <span class="op">=</span> <span class="st">"tibble"</span>,</span>
<span>  ptypes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  subclass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>intercept</dt>
<dd><p>A logical. Should an intercept be included in the
processed data? This information is used by the <code>process</code> function
in the <code>mold</code> and <code>forge</code> function list.</p></dd>


<dt>allow_novel_levels</dt>
<dd><p>A logical. Should novel factor levels be allowed at
prediction time? This information is used by the <code>clean</code> function in the
<code>forge</code> function list, and is passed on to <code><a href="scream.html">scream()</a></code>.</p></dd>


<dt>ptypes</dt>
<dd><p>Either <code>NULL</code>, or a named list with 2 elements, <code>predictors</code>
and <code>outcomes</code>, both of which are 0-row tibbles. <code>ptypes</code> is generated
automatically at <code><a href="mold.html">mold()</a></code> time and is used to validate <code>new_data</code> at
prediction time.</p></dd>


<dt>formula</dt>
<dd><p>Either <code>NULL</code>, or a formula that specifies how the
predictors and outcomes should be preprocessed. This argument is set
automatically at <code><a href="mold.html">mold()</a></code> time.</p></dd>


<dt>indicators</dt>
<dd><p>A single character string. Control how factors are
expanded into dummy variable indicator columns. One of:</p><ul><li><p><code>"traditional"</code> - The default. Create dummy variables using the
traditional <code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix()</a></code> infrastructure. Generally this creates
<code>K - 1</code> indicator columns for each factor, where <code>K</code> is the number of
levels in that factor.</p></li>
<li><p><code>"none"</code> - Leave factor variables alone. No expansion is done.</p></li>
<li><p><code>"one_hot"</code> - Create dummy variables using a one-hot encoding approach
that expands unordered factors into all <code>K</code> indicator columns, rather than
<code>K - 1</code>.</p></li>
</ul></dd>


<dt>composition</dt>
<dd><p>Either "tibble", "matrix", or "dgCMatrix" for the format
of the processed predictors. If "matrix" or "dgCMatrix" are chosen, all of
the predictors must be numeric after the preprocessing method has been
applied; otherwise an error is thrown.</p></dd>


<dt>...</dt>
<dd><p>Name-value pairs for additional elements of blueprints that
subclass this blueprint.</p></dd>


<dt>subclass</dt>
<dd><p>A character vector. The subclasses of this blueprint.</p></dd>


<dt>fresh</dt>
<dd><p>Should already trained operations be re-trained when <code><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep()</a></code> is
called?</p></dd>


<dt>strings_as_factors</dt>
<dd><p>Should character columns be converted to factors
when <code><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep()</a></code> is called?</p></dd>


<dt>recipe</dt>
<dd><p>Either <code>NULL</code>, or an unprepped recipe. This argument is set
automatically at <code><a href="mold.html">mold()</a></code> time.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A preprocessing blueprint, which is a list containing the inputs used as
arguments to the function, along with a class specific to the type
of blueprint being created.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer></body></html>

